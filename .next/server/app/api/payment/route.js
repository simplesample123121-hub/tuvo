(()=>{var e={};e.id=77,e.ids=[77],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},84770:e=>{"use strict";e.exports=require("crypto")},45247:(e,t,a)=>{"use strict";a.r(t),a.d(t,{patchFetch:()=>y,routeModule:()=>d,serverHooks:()=>m,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>l});var n={};a.r(n),a.d(n,{POST:()=>p});var s=a(52412),r=a(14293),i=a(94147),o=a(77856),u=a(77420);async function p(e){try{let{amount:t,product:a,firstname:n,email:s,mobile:r}=await e.json();if(!t||!a||!n||!s||!r)return o.NextResponse.json({error:"Missing required fields"},{status:400});let i=await (0,u.KH)({amount:t,productinfo:JSON.stringify(a),firstname:n,email:s,mobile:r});console.log("PayU transaction created:",i);let p=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Redirecting to Payment Gateway...</title>
      </head>
      <body>
        <form id="payment_post" method="post" action="https://test.payu.in/_payment">
          <input type="hidden" name="key" value="YtZVuv" />
          <input type="hidden" name="txnid" value="${i.txnid}" />
          <input type="hidden" name="amount" value="${t}" />
          <input type="hidden" name="productinfo" value="${JSON.stringify(a)}" />
          <input type="hidden" name="firstname" value="${n}" />
          <input type="hidden" name="email" value="${s}" />
          <input type="hidden" name="phone" value="${r}" />
          <input type="hidden" name="surl" value="${process.env.NEXT_PUBLIC_BASE_URL||"http://localhost:3000"}/api/payment/verify/${i.txnid}" />
          <input type="hidden" name="furl" value="${process.env.NEXT_PUBLIC_BASE_URL||"http://localhost:3000"}/api/payment/verify/${i.txnid}" />
          <input type="hidden" name="hash" value="${i.hash}" />
          <input type="hidden" name="mode" value="TEST" />
        </form>
        <script>
          document.getElementById('payment_post').submit();
        </script>
        <p>Redirecting to payment gateway...</p>
      </body>
      </html>
    `;return new Response(p,{headers:{"Content-Type":"text/html"}})}catch(e){return console.error("Payment initiation error:",e),o.NextResponse.json({error:"Payment initiation failed",message:e.message},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/payment/route",pathname:"/api/payment",filename:"route",bundlePath:"app/api/payment/route"},resolvedPagePath:"C:\\Users\\Harry\\Documents\\Ticket Booking Platform cursor\\Ticket Booking Platform cursor\\app\\api\\payment\\route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:c,workUnitAsyncStorage:l,serverHooks:m}=d;function y(){return(0,i.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:l})}},35303:()=>{},77420:(e,t,a)=>{"use strict";a.d(t,{KH:()=>o,ZV:()=>u});var n=a(84770),s=a.n(n);let r={key:"YtZVuv",salt:"MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDOs/fD5n8GLaXcaDgj53z0JdFe0sclSXemO3fu7+gJAei5r6oTk0EOnVW7Sh61YYV1J7nzaM5g16ZLVIfGH29LDjN6egOnpgCJ7J8qXv4zyHi88tE1k9soKynw7Ff2r/J6EbyFNWR6bWULF9qNu31PxCNjuuTbhmmiE1u1eF/hRlf5NwMn3GPyI8lfUSD/wMAMY8iJuc9Ihj4MD3689zJywMT4MWScjvlIQrJRFFlzTGzyLc1egnhuAqLNebtxpmxowSBCjDw0YRgZTa1PrbbsEAGh6PGb6u3DS82ICCSUhgukOCX+fv3CT8NJ/iccaviAfFqCMUwNIh/h21pBmJm/AgMBAAECggEAZVjeIYIxQ9E74o6DAC+vF3I3btu/4utbq/i6fD/KsCfseKbFqCVqH4VLFLJpzhsLuX6J8OuxTNBPa939WEnvYoiK+wE6K4f7+aQ4AiljT/Z6JIKVy0Q8jzxiqwrmskBgjjOGEHY2VsSuZzsB4L5N2b9cbrijH3OO9XWyYI6tzCC0yU1vV+K9lYZ5ecRGkG50wcgjqOOTUINz1aynbe2rN4Nb+of+aWBZ4jOR1IoSy0XUz0c6SUFsldYxbMOAq9EvqL8gQhgy6D2I+Pdjc2g8eHxdoudFBxQoXhd1YjRW1AvteL43kPvTakvwz8HqwrtJYJX4vDspjk+cRRtMRE+zMQKBgQDoQ4njSoxcdM9vTvgS5/55Z97EinGFtEeBJYkShHqU477v+jGS4155ulEpzRHnG1oZ4ABuFZWqN8qYDFl43T0Vy9vk4FPtNHsz7CO5Vsp4eW8uIMqR6QDJc2ioRN4Rox43/DiVPU6ujxhbbUfCoeIGOrMcg9Ys+gy0076DNxUQaQKBgQDj07Ws/tANq3USYkPwrm+8zDQXqMSgAM/L1FUxy3meZtNXXwUweoYXqW8A5wXWgCBngVS5YOhce34mBoCTh1rZychYEA3F+0ga/A+ik37evmcQtjoHBk9+N2YBgG6SsmnQeuZ1lgFLKO2nxmIplQ5sOQdA/M2fiW4yUTSL5ocT5wKBgHwY2eufQS+FGfAW+WTgn46ueM/6SH1vvWS7cWl7byNuK+58d1BMO4Y+jm8PKqmYa6O3k4M99SFlfdGPh56UVrb2nR7E3RK4H7u2R8AXJ0cHWugCjTk4jTsVdq2xXhV+Wf7/vBvBDfEmc5Ul5lmPtPwvENQDfMO7Nl7HY9sn6xFBAoGAYWqqWXGPlvjEk3rPIEAGaU1LzP4OLXiLYdXGJAekVlYTcl2gA22wnreFTnZ6aZDZykhj6OyGDt2DQFExc2PCNjPw5a7fpNNgrqEvMk4tRqNVwLCauVw6a3bWuDepkDKXylxy5L6iiPfUPxQ17x/cTexIrMIsTlZed0d/135YLesCgYB7b/QbfNjzC3ffVWGJBHhXuxxOY12AXbJ6sNQYRzXkaWEsboi6OSaNtoT5bQPPui8WcaEHTHvp90cK7SwB0ywhUIowV+0Xte9SHxYam2T/zuGgAmSuOac+JbUAFekpbv/zNyOosdOIqw4++sKTeIv2S3QtEPCL62OqdTagoPgBZg=="},i=()=>"PAYU_MONEY_"+Math.floor(8888888*Math.random()),o=async({email:e,firstname:t,mobile:a,txnid:n=i(),amount:o,productinfo:u,udf1:p="",udf2:d="",udf3:c="",udf4:l="",udf5:m=""})=>{let y=`${r.key}|${n}|${o}|${u}|${t}|${e}|${p}|${d}|${c}|${l}|${m}||||||${r.salt}`;console.log("Hash String:",y);let h=JSON.stringify({v1:s().createHash("sha512").update(y).digest("hex"),v2:s().createHash("sha512").update(y).digest("hex")});return console.log("Calculated Hash:",h),{status:"success",message:"Payment initiated successfully",txnid:n,hash:h}},u=async e=>({status:"success",message:"Payment verified successfully",txnid:e,amount:0,productinfo:"",firstname:"",email:"",phone:"",hash:""})}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),n=t.X(0,[267,814],()=>a(45247));module.exports=n})();